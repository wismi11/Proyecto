(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboardActivityOrder"],{"16ff":function(t,a,s){var e=s("ec4e");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=s("499e").default;i("6ca90dea",e,!0,{sourceMap:!1,shadowMode:!1})},4869:function(t,a,s){"use strict";s("16ff")},"5d8b":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-container",{staticClass:"tw-px-0",on:{scroll:t.onScroll}},[s("b-button-group",{staticClass:"tw-mb-8",attrs:{size:"sm"}},t._l(t.granularityButtons,(function(a){return s("b-button",{key:a.id,attrs:{id:a.id,variant:a.id==t.pressedButtonId?"primary":"outline-secondary",disabled:a.disabled},on:{click:function(s){return s.preventDefault(),t.activateButton(a)}}},[t._v(t._s(a.label[0].toUpperCase()+a.label.slice(1)))])})),1),s("b-container",{staticClass:"tw-px-0"},[s("LineChartWithLoader",{attrs:{"choice-tab":t.title,"data-sets":t.dataSets,loading:this.$store.state.dashboard.state.loadingOrdersByPeriodicity,granularity:t.granularity,"short-cut-date":this.$store.getters.buttonDate}})],1),s("b-container",{staticClass:"tw-flex tw-px-0"},[s("PieChartWithLoader",{staticClass:"tw-px-4 tw-w-1/2",attrs:{"choice-tab":t.title,data:this.$store.state.dashboard.state.dataTopProducts,loading:this.$store.state.dashboard.state.loadingTopProducts,labels:this.$store.state.dashboard.state.labelsTopProducts,"legend-callback":function(){},"use-inline-label":"",title:"Top products"}}),s("div",{staticClass:"tw-flex-col tw-px-4 tw-w-1/2"},[s("div",{staticClass:"tw-py-4"},[s("span",{staticClass:"tw-text-base tw-font-bold"},[t._v(t._s(t.$t("tabsBody.orders.cartAnalysis")))])]),s("div",{staticClass:"tw-pb-4"},[s("div",{staticClass:"tw-text-xs"},[t._v(" "+t._s(t.$t("tabsBody.orders.cartValueAverage"))+" "),s("ToolTip",{key:"cartValueAverage",attrs:{target:"popover-cartValueAverage",triggers:"click hover",placement:"top",content:t.$t("tabsBody.orders.cartValueAverageTooltip"),"style-button":"margin-left: 10px;"}})],1),s("div",{staticClass:"value"},[t._v(" "+t._s(t.$n(this.$store.state.dashboard.state.orderCartAverage,"currency"))+" ")])]),s("div",[s("div",{staticClass:"tw-text-xs"},[t._v(" "+t._s(t.$t("tabsBody.orders.abandonedCartRate"))+" "),s("ToolTip",{key:"abandonedCartRate",attrs:{target:"popover-abandonedCartRate",triggers:"click hover",placement:"top",content:t.$t("tabsBody.orders.abandonedCartRateTooltip"),"style-button":"margin-left: 10px;"}})],1),s("div",{staticClass:"value"},[t._v(t._s(t.getCartAbandoned))]),s("b-link",{staticClass:"see-details",attrs:{href:this.$store.state.dashboard.linkAdminCarts,target:"_blank"}},[t._v(t._s(t.$t("tabsBody.orders.seeDetails")))])],1)])],1)],1)},i=[],n=s("5530"),r=(s("7db0"),s("159b"),s("d81d"),s("cebc")),o=s("0812"),d=s("896f"),u=s("12d5"),l=s("c1df"),c=s("4c62"),b={name:"Orders",components:{ToolTip:u["a"],LineChartWithLoader:o["a"],PieChartWithLoader:d["a"]},props:{title:{type:String,default:"orders"}},data:function(){return{buttons:[{id:1,pressed:!0,label:this.$t("tabsBody.dates.hour"),slug:"hours",variantButton:"primary",disabled:!1},{id:2,pressed:!0,label:this.$t("tabsBody.dates.day"),slug:"days",variantButton:"primary",disabled:!1},{id:3,pressed:!1,label:this.$t("tabsBody.dates.week"),slug:"weeks",variantButton:"outline-secondary",disabled:!1},{id:4,pressed:!1,label:this.$t("tabsBody.dates.month"),slug:"months",variantButton:"outline-secondary",disabled:!1}],granularity:"days",pressedButtonId:1,unwatchButtonDate:"",dateRange:null,settingsStorage:new c["a"]("dashboard_settings")}},created:function(){var t=this;if(this.settingsStorage.getItem("chart_granularity")){var a=this.settingsStorage.getItem("chart_granularity"),s=this.buttons.find((function(t){return t.slug===a}));this.activateButton(s)}else this.activateButton(this.granularityButtons[0]);this.setTabSelected("orders"),this.unwatchButtonDate=this.$store.watch((function(t,a){return{buttonDate:a.buttonDate,dateRange:a.dateRange,compareMode:a.getCompareMode}}),(function(a){t.dateRange=Object(n["a"])({},a.dateRange),t.detectButtonDisable(a.buttonDate,a.dateRange),t.getOrders({date:a.dateRange,granularity:t.granularity})}),{immediate:!0})},beforeDestroy:function(){this.unwatchButtonDate()},watch:{dateRange:function(){var t=this,a=this.granularityButtons.find((function(a){return a.id===t.pressedButtonId}));!a&&this.granularityButtons.length&&this.activateButton(this.granularityButtons[0])}},methods:Object(n["a"])(Object(n["a"])({},Object(r["c"])({getOrders:"getOrders",setTabSelected:"setTabSelected"})),{},{activateButton:function(t){this.granularity=t.slug,this.settingsStorage.set("chart_granularity",t.slug),this.pressedButtonId=t.id,this.deactivateButtons(),t.pressed=!0,t.variantButton="primary",this.getOrders({date:this.$store.getters.dateRange,granularity:this.granularity}),this.$segment.track("Change Granularity",{title:t.label,module:"ps_metrics"})},deactivateButtons:function(){this.buttons.forEach((function(t){t.pressed=!1,t.variantButton="outline-secondary"}))},onScroll:function(t){var a=t.target,s=a.scrollTop,e=a.clientHeight,i=a.scrollHeight;s+e>=i&&this.$segment.track("scroll orders",{title:this.title,module:"ps_metrics"})},detectButtonDisable:function(t,a){switch(t){case"today":case"yesterday":this.buttons[0].disabled=!1,this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary";break;case"7days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break;case"30days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[2].pressed=!0,this.buttons[2].variantButton="primary";break;case"custom":var s=Math.abs(l(a.start).diff(l(a.end),"days"))+1;s<2?(this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary"):s<=7?(this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):s>7&&s<30?(this.buttons[0].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):(this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary");break;default:this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break}}}),computed:{granularityButtons:function(){var t,a=this,s=[{min:0,max:1,buttonIds:[0]},{min:2,max:7,buttonIds:[1]},{min:8,max:25,buttonIds:[1,2]},{min:26,max:59,buttonIds:[1,2]},{min:60,max:89,buttonIds:[1,2,3]},{min:90,max:1/0,buttonIds:[2,3]}];if(!this.dateRange)return[s[0]];for(var e=l(this.dateRange.start),i=l(this.dateRange.end),n=i.diff(e,"days"),r=s.length-1;!t&&r>=0;r--)n>=s[r].min&&n<=s[r].max&&(t=s[r].buttonIds.map((function(t){return a.buttons[t]})));return t||[]},getCartAbandoned:function(){return"".concat(this.$store.state.dashboard.state.ordersAbandonnedCarts," %")},dataSets:function(){return this.$store.getters.getOrdersDataSets}}},h=b,p=(s("4869"),s("2877")),g=Object(p["a"])(h,e,i,!1,null,"31491fee",null);a["default"]=g.exports},ec4e:function(t,a,s){var e=s("24fb");a=e(!1),a.push([t.i,".see-details[data-v-31491fee]{color:#25b9d7;font-family:Open Sans;font-size:10px;letter-spacing:0;line-height:14px}.card-analysis[data-v-31491fee]{margin-top:40px;width:70%!important;padding:20px}.card-analysis .card-header[data-v-31491fee]{font-size:16px!important;font-weight:700!important;margin-bottom:25px!important}.card-analysis .analysis-content[data-v-31491fee]{padding-left:20px;padding-top:10px}.card-analysis .analysis-content .name[data-v-31491fee]{text-transform:uppercase;font-size:10px;margin-bottom:0}.card-analysis .analysis-content .value[data-v-31491fee]{font-weight:700;font-size:24px}",""]),t.exports=a}}]);