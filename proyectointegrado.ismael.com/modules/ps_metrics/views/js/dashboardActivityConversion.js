(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboardActivityConversion"],{"0694":function(t,e,s){var a=s("7f2b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=s("499e").default;i("1052bd1e",a,!0,{sourceMap:!1,shadowMode:!1})},"09c6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tw-border-2 tw-border-dashed tw-border-gray-500 tw-bg-gray-100 tw-p-8"},[t._m(0),s("div",{staticClass:"tw-text-base tw-text-center tw-pb-6"},[t._v(" "+t._s(t.$t("needGAPanel.textContent"))+" ")]),s("div",{staticClass:"tw-text-center"},[s("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.goToSettings()}}},[t._v(t._s(t.$t("needGAPanel.configure")))])],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-pb-4"},[a("img",{staticClass:"tw-w-24 tw-m-auto",attrs:{src:s("9943"),alt:"need_google_analytics"}})])}],n={name:"NeedGAPanel",methods:{goToSettings:function(){window.location.href=this.$store.getters.getConfigurationLink}}},o=n,r=s("2877"),u=Object(r["a"])(o,a,i,!1,null,null,null);e["a"]=u.exports},"20ff":function(t,e,s){var a=s("65d9");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=s("499e").default;i("765f1025",a,!0,{sourceMap:!1,shadowMode:!1})},"65d9":function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,".title[data-v-4b0ccd51]{font-size:10px;line-height:14px}.title[data-v-4b0ccd51],.value[data-v-4b0ccd51]{color:#363a41!important;font-family:Open Sans;letter-spacing:0}.value[data-v-4b0ccd51]{font-size:15px;font-weight:400;line-height:33px}.kpiNumber[data-v-4b0ccd51]{font-size:24px;font-weight:700}@media (max-width:1400px){.title[data-v-4b0ccd51]{font-size:10px!important;line-height:14px}.title[data-v-4b0ccd51],.value[data-v-4b0ccd51]{color:#363a41!important;font-family:Open Sans;letter-spacing:0}.value[data-v-4b0ccd51]{font-size:1em;line-height:33px}}@media (max-width:1024px){.title[data-v-4b0ccd51]{font-size:7px!important;line-height:14px}.title[data-v-4b0ccd51],.value[data-v-4b0ccd51]{color:#363a41!important;font-family:Open Sans;letter-spacing:0}.value[data-v-4b0ccd51]{font-size:1em;line-height:33px}}",""]),t.exports=e},"77f2":function(t,e,s){"use strict";s("20ff")},"7f2b":function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,".titlekpi[data-v-098e70cd]{color:#363a41;font-family:Open Sans;font-size:16px;font-weight:700;letter-spacing:-.17px;line-height:22px;margin:12px 0}",""]),t.exports=e},"8c2d":function(t,e,s){"use strict";s("0694")},a543:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[this.$store.getters.gaIsOnboarded?s("b-container",{staticClass:"tw-px-0",on:{scroll:t.onScroll}},[s("b-button-group",{staticClass:"tw-mb-8",attrs:{size:"sm"}},t._l(t.granularityButtons,(function(e){return s("b-button",{key:e.id,attrs:{id:e.id,variant:e.id==t.pressedButtonId?"primary":"outline-secondary",disabled:e.disabled},on:{click:function(s){return s.preventDefault(),t.activateButton(e)}}},[t._v(t._s(e.label[0].toUpperCase()+e.label.slice(1)))])})),1),s("b-container",{staticClass:"tw-px-0"},[s("LineChartWithLoader",{attrs:{"choice-tab":t.title,"data-sets":t.dataSets,loading:this.$store.state.dashboard.state.loadingConversionsByPeriodicity,granularity:t.granularity,"short-cut-date":this.$store.getters.buttonDate}})],1),s("b-container",{staticClass:"tw-px-0 tw-flex tw-flex-wrap"},[s("PieChartWithLoader",{attrs:{"choice-tab":t.title,data:t.kpiPaymentMethods.values,loading:t.loading,labels:t.kpiPaymentMethods.labels,granularity:t.granularity,"legend-callback":function(){},title:t.$t("tabsBody.conversionRate.paymentMethods"),"use-inline-label":""}}),s("b-col",{staticClass:"tw-flex-wrap tw-w-1/4"},[s("div",{staticClass:"titlekpi tw-flex tw-py-4"},[t._v(" "+t._s(t.$t("tabsBody.conversionRate.loyaltyAnalysis"))+" "),s("ToolTip",{attrs:{target:"popover-revenue-analysis",triggers:"click hover",placement:"top",content:t.$t("tabsBody.conversionRate.loyaltyAnalysisTooltip"),"style-button":"margin-left: 10px;"}})],1),t.loading?t._e():s("div",{staticClass:"tw-my-8"},[t.KpiNewCustomers?s("TextKpi",{attrs:{label:t.$t("tabsBody.conversionRate."+t.KpiNewCustomers.customers.label),"key-translate":"tabsBody.conversionRate.customer_with_orders_text","value-customers":t.KpiNewCustomers.customers.percent,"type-value-customers":"%","value-revenues":t.KpiNewCustomers.revenues.percent,"type-value-revenues":"%"}}):t._e(),t.KpiNewCustomers?s("TextKpi",{attrs:{label:t.$t("tabsBody.conversionRate."+t.KpiRepeatCustomers.customers.label),"key-translate":"tabsBody.conversionRate.customer_with_orders_text","value-customers":t.KpiRepeatCustomers.customers.percent,"type-value-customers":"%","value-revenues":t.KpiRepeatCustomers.revenues.percent,"type-value-revenues":"%"}}):t._e()],1)])],1)],1):s("NeedGAPanel")],1)},i=[],n=s("5530"),o=(s("7db0"),s("159b"),s("d81d"),s("cebc")),r=s("896f"),u=s("0812"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"tw-mb-8 tw-p-0"},[s("b-col",{staticClass:"tw-p-0",attrs:{cols:""}},[s("div",{staticClass:"title tw-flex"},[t._v(" "+t._s(t.label)+" "),t.tooltip?s("ToolTip",{attrs:{target:t.tooltip_target,triggers:"click hover",placement:"top",content:t.tooltip,"style-button":"margin-left: 10px;"}}):t._e()],1)]),s("div",{staticClass:"value"},[s("div",{attrs:{id:"app"}},[s("i18n",{attrs:{path:t.keyTranslate,tag:"span"}},[s("span",{staticClass:"kpiNumber",attrs:{place:"valueCustomers"}},[t._v(t._s(Number(t.valueCustomers).toFixed(0)))]),s("span",{attrs:{place:"typeValueCustomers"}},[t._v(t._s(t.typeValueCustomers))]),s("span",{staticClass:"kpiNumber",attrs:{place:"valueRevenues"}},[t._v(t._s(Number(t.valueRevenues).toFixed(0)))]),s("span",{attrs:{place:"typeValueRevenues"}},[t._v(t._s(t.typeValueRevenues))])])],1)])],1)},d=[],c=(s("a9e3"),s("12d5")),b={components:{ToolTip:c["a"]},props:{label:{type:String,required:!0},tooltip:{type:String,required:!1,default:null},keyTranslate:{type:String,required:!0},valueCustomers:{type:Number,required:!0},typeValueCustomers:{type:String,required:!0},valueRevenues:{type:Number,required:!0},typeValueRevenues:{type:String,required:!0}},computed:{tooltip_target:function(){return"popover-kpi-".concat(this._uid)}}},p=b,h=(s("77f2"),s("2877")),v=Object(h["a"])(p,l,d,!1,null,"4b0ccd51",null),g=v.exports,m=s("09c6"),y=s("c1df"),f=s("4c62"),w={name:"Conversions",components:{PieChartWithLoader:r["a"],NeedGAPanel:m["a"],LineChartWithLoader:u["a"],TextKpi:g,ToolTip:c["a"]},props:{title:{type:String,default:"conversion rate"}},data:function(){return{buttons:[{id:1,pressed:!0,label:this.$t("tabsBody.dates.hour"),slug:"hours",variantButton:"primary",disabled:!1},{id:2,pressed:!0,label:this.$t("tabsBody.dates.day"),slug:"days",variantButton:"primary",disabled:!1},{id:3,pressed:!1,label:this.$t("tabsBody.dates.week"),slug:"weeks",variantButton:"outline-secondary",disabled:!1},{id:4,pressed:!1,label:this.$t("tabsBody.dates.month"),slug:"months",variantButton:"outline-secondary",disabled:!1}],granularity:"days",pressedButtonId:1,unwatchButtonDate:"",dateRange:null,settingsStorage:new f["a"]("dashboard_settings")}},created:function(){var t=this;if(this.settingsStorage.getItem("chart_granularity")){var e=this.settingsStorage.getItem("chart_granularity"),s=this.buttons.find((function(t){return t.slug===e}));this.activateButton(s)}else this.activateButton(this.granularityButtons[0]);this.setTabSelected("conversion rate"),this.unwatchButtonDate=this.$store.watch((function(t,e){return{buttonDate:e.buttonDate,dateRange:e.dateRange,compareMode:e.getCompareMode}}),(function(e){t.dateRange=Object(n["a"])({},e.dateRange),t.detectButtonDisable(e.buttonDate,e.dateRange),t.getConversions({date:e.dateRange,granularity:t.granularity})}),{immediate:!0})},beforeDestroy:function(){this.unwatchButtonDate()},watch:{dateRange:function(){var t=this,e=this.granularityButtons.find((function(e){return e.id===t.pressedButtonId}));!e&&this.granularityButtons.length&&this.activateButton(this.granularityButtons[0])}},methods:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getConversions:"getConversions",setTabSelected:"setTabSelected"})),{},{activateButton:function(t){this.granularity=t.slug,this.settingsStorage.set("chart_granularity",t.slug),this.pressedButtonId=t.id,this.deactivateButtons(),t.pressed=!0,t.variantButton="primary",this.getConversions({date:this.$store.getters.dateRange,granularity:this.granularity}),this.$segment.track("Change Granularity",{title:t.label,module:"ps_metrics"})},deactivateButtons:function(){this.buttons.forEach((function(t){t.pressed=!1,t.variantButton="outline-secondary"}))},onScroll:function(t){var e=t.target,s=e.scrollTop,a=e.clientHeight,i=e.scrollHeight;s+a>=i&&this.$segment.track("scroll conversion",{title:this.title,module:"ps_metrics"})},detectButtonDisable:function(t,e){switch(t){case"today":case"yesterday":this.buttons[0].disabled=!1,this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary";break;case"7days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break;case"30days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[2].pressed=!0,this.buttons[2].variantButton="primary";break;case"custom":var s=Math.abs(y(e.start).diff(y(e.end),"days"))+1;s<2?(this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary"):s<=7?(this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):s>7&&s<30?(this.buttons[0].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):(this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary");break;default:this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break}}}),computed:{granularityButtons:function(){var t,e=this,s=[{min:0,max:1,buttonIds:[0]},{min:2,max:7,buttonIds:[1]},{min:8,max:25,buttonIds:[1,2]},{min:26,max:59,buttonIds:[1,2]},{min:60,max:89,buttonIds:[1,2,3]},{min:90,max:1/0,buttonIds:[2,3]}];if(!this.dateRange)return[s[0]];for(var a=y(this.dateRange.start),i=y(this.dateRange.end),n=i.diff(a,"days"),o=s.length-1;!t&&o>=0;o--)n>=s[o].min&&n<=s[o].max&&(t=s[o].buttonIds.map((function(t){return e.buttons[t]})));return t||[]},dataSets:function(){return this.$store.getters.getConversionDataSets},KpiNewCustomers:function(){return this.$store.getters.getDataConversionsByCustomerType.without_orders},KpiRepeatCustomers:function(){return this.$store.getters.getDataConversionsByCustomerType.with_orders},loading:function(){return this.$store.state.dashboard.state.loadingConversionsByCategory},kpiPaymentMethods:function(){return this.loading?{values:[],labels:[]}:this.$store.state.dashboard.state.dataConversionsByPaymentMethod}}},B=w,C=(s("8c2d"),Object(h["a"])(B,a,i,!1,null,"098e70cd",null));e["default"]=C.exports}}]);